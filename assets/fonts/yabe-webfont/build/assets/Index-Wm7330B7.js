import{ad as he,U as me,e as R,n as pe,f as ae,r as ge,g as ve,o as H,c as q,b as n,h as oe,j as ye,d as B,k as X,F as ne,t as be,u as v,a as le,s as ue}from"./app-B90gRHc9.js";import{a as _e,c as se}from"./cloneDeep-DKPH_8Zr.js";import{c as $e,t as ke,g as A}from"./get-DrT8Bxqf.js";import{i as de,o as Me}from"./_Uint8Array-CGOLgoAz.js";import{a as Se,u as De,b as we}from"./notifier-BHyuOhoy.js";var ce={exports:{}};(function(C,y){(function(d,p){C.exports=p()})(he,function(){var d=1e3,p=6e4,x=36e5,O="millisecond",c="second",b="minute",k="hour",w="day",j="week",Y="month",r="quarter",e="year",h="date",P="Invalid Date",I=/^(\d{4})[-/]?(\d{1,2})?[-/]?(\d{0,2})[Tt\s]*(\d{1,2})?:?(\d{1,2})?:?(\d{1,2})?[.:]?(\d+)?$/,M=/\[([^\]]+)]|Y{1,4}|M{1,4}|D{1,2}|d{1,4}|H{1,2}|h{1,2}|a|A|m{1,2}|s{1,2}|Z{1,2}|SSS/g,S={name:"en",weekdays:"Sunday_Monday_Tuesday_Wednesday_Thursday_Friday_Saturday".split("_"),months:"January_February_March_April_May_June_July_August_September_October_November_December".split("_"),ordinal:function(o){var i=["th","st","nd","rd"],t=o%100;return"["+o+(i[(t-20)%10]||i[t]||i[0])+"]"}},ee=function(o,i,t){var a=String(o);return!a||a.length>=i?o:""+Array(i+1-a.length).join(t)+o},fe={s:ee,z:function(o){var i=-o.utcOffset(),t=Math.abs(i),a=Math.floor(t/60),s=t%60;return(i<=0?"+":"-")+ee(a,2,"0")+":"+ee(s,2,"0")},m:function o(i,t){if(i.date()<t.date())return-o(t,i);var a=12*(t.year()-i.year())+(t.month()-i.month()),s=i.clone().add(a,Y),l=t-s<0,u=i.clone().add(a+(l?-1:1),Y);return+(-(a+(t-s)/(l?s-u:u-s))||0)},a:function(o){return o<0?Math.ceil(o)||0:Math.floor(o)},p:function(o){return{M:Y,y:e,w:j,d:w,D:h,h:k,m:b,s:c,ms:O,Q:r}[o]||String(o||"").toLowerCase().replace(/s$/,"")},u:function(o){return o===void 0}},z="en",N={};N[z]=S;var ie="$isDayjsObject",te=function(o){return o instanceof K||!(!o||!o[ie])},Z=function o(i,t,a){var s;if(!i)return z;if(typeof i=="string"){var l=i.toLowerCase();N[l]&&(s=l),t&&(N[l]=t,s=l);var u=i.split("-");if(!s&&u.length>1)return o(u[0])}else{var m=i.name;N[m]=i,s=m}return!a&&s&&(z=s),s||!a&&z},_=function(o,i){if(te(o))return o.clone();var t=typeof i=="object"?i:{};return t.date=o,t.args=arguments,new K(t)},f=fe;f.l=Z,f.i=te,f.w=function(o,i){return _(o,{locale:i.$L,utc:i.$u,x:i.$x,$offset:i.$offset})};var K=function(){function o(t){this.$L=Z(t.locale,null,!0),this.parse(t),this.$x=this.$x||t.x||{},this[ie]=!0}var i=o.prototype;return i.parse=function(t){this.$d=function(a){var s=a.date,l=a.utc;if(s===null)return new Date(NaN);if(f.u(s))return new Date;if(s instanceof Date)return new Date(s);if(typeof s=="string"&&!/Z$/i.test(s)){var u=s.match(I);if(u){var m=u[2]-1||0,g=(u[7]||"0").substring(0,3);return l?new Date(Date.UTC(u[1],m,u[3]||1,u[4]||0,u[5]||0,u[6]||0,g)):new Date(u[1],m,u[3]||1,u[4]||0,u[5]||0,u[6]||0,g)}}return new Date(s)}(t),this.init()},i.init=function(){var t=this.$d;this.$y=t.getFullYear(),this.$M=t.getMonth(),this.$D=t.getDate(),this.$W=t.getDay(),this.$H=t.getHours(),this.$m=t.getMinutes(),this.$s=t.getSeconds(),this.$ms=t.getMilliseconds()},i.$utils=function(){return f},i.isValid=function(){return this.$d.toString()!==P},i.isSame=function(t,a){var s=_(t);return this.startOf(a)<=s&&s<=this.endOf(a)},i.isAfter=function(t,a){return _(t)<this.startOf(a)},i.isBefore=function(t,a){return this.endOf(a)<_(t)},i.$g=function(t,a,s){return f.u(t)?this[a]:this.set(s,t)},i.unix=function(){return Math.floor(this.valueOf()/1e3)},i.valueOf=function(){return this.$d.getTime()},i.startOf=function(t,a){var s=this,l=!!f.u(a)||a,u=f.p(t),m=function(G,T){var F=f.w(s.$u?Date.UTC(s.$y,T,G):new Date(s.$y,T,G),s);return l?F:F.endOf(w)},g=function(G,T){return f.w(s.toDate()[G].apply(s.toDate("s"),(l?[0,0,0,0]:[23,59,59,999]).slice(T)),s)},$=this.$W,D=this.$M,L=this.$D,E="set"+(this.$u?"UTC":"");switch(u){case e:return l?m(1,0):m(31,11);case Y:return l?m(1,D):m(0,D+1);case j:var W=this.$locale().weekStart||0,U=($<W?$+7:$)-W;return m(l?L-U:L+(6-U),D);case w:case h:return g(E+"Hours",0);case k:return g(E+"Minutes",1);case b:return g(E+"Seconds",2);case c:return g(E+"Milliseconds",3);default:return this.clone()}},i.endOf=function(t){return this.startOf(t,!1)},i.$set=function(t,a){var s,l=f.p(t),u="set"+(this.$u?"UTC":""),m=(s={},s[w]=u+"Date",s[h]=u+"Date",s[Y]=u+"Month",s[e]=u+"FullYear",s[k]=u+"Hours",s[b]=u+"Minutes",s[c]=u+"Seconds",s[O]=u+"Milliseconds",s)[l],g=l===w?this.$D+(a-this.$W):a;if(l===Y||l===e){var $=this.clone().set(h,1);$.$d[m](g),$.init(),this.$d=$.set(h,Math.min(this.$D,$.daysInMonth())).$d}else m&&this.$d[m](g);return this.init(),this},i.set=function(t,a){return this.clone().$set(t,a)},i.get=function(t){return this[f.p(t)]()},i.add=function(t,a){var s,l=this;t=Number(t);var u=f.p(a),m=function(D){var L=_(l);return f.w(L.date(L.date()+Math.round(D*t)),l)};if(u===Y)return this.set(Y,this.$M+t);if(u===e)return this.set(e,this.$y+t);if(u===w)return m(1);if(u===j)return m(7);var g=(s={},s[b]=p,s[k]=x,s[c]=d,s)[u]||1,$=this.$d.getTime()+t*g;return f.w($,this)},i.subtract=function(t,a){return this.add(-1*t,a)},i.format=function(t){var a=this,s=this.$locale();if(!this.isValid())return s.invalidDate||P;var l=t||"YYYY-MM-DDTHH:mm:ssZ",u=f.z(this),m=this.$H,g=this.$m,$=this.$M,D=s.weekdays,L=s.months,E=s.meridiem,W=function(T,F,V,Q){return T&&(T[F]||T(a,l))||V[F].slice(0,Q)},U=function(T){return f.s(m%12||12,T,"0")},G=E||function(T,F,V){var Q=T<12?"AM":"PM";return V?Q.toLowerCase():Q};return l.replace(M,function(T,F){return F||function(V){switch(V){case"YY":return String(a.$y).slice(-2);case"YYYY":return f.s(a.$y,4,"0");case"M":return $+1;case"MM":return f.s($+1,2,"0");case"MMM":return W(s.monthsShort,$,L,3);case"MMMM":return W(L,$);case"D":return a.$D;case"DD":return f.s(a.$D,2,"0");case"d":return String(a.$W);case"dd":return W(s.weekdaysMin,a.$W,D,2);case"ddd":return W(s.weekdaysShort,a.$W,D,3);case"dddd":return D[a.$W];case"H":return String(m);case"HH":return f.s(m,2,"0");case"h":return U(1);case"hh":return U(2);case"a":return G(m,g,!0);case"A":return G(m,g,!1);case"m":return String(g);case"mm":return f.s(g,2,"0");case"s":return String(a.$s);case"ss":return f.s(a.$s,2,"0");case"SSS":return f.s(a.$ms,3,"0");case"Z":return u}return null}(T)||u.replace(":","")})},i.utcOffset=function(){return 15*-Math.round(this.$d.getTimezoneOffset()/15)},i.diff=function(t,a,s){var l,u=this,m=f.p(a),g=_(t),$=(g.utcOffset()-this.utcOffset())*p,D=this-g,L=function(){return f.m(u,g)};switch(m){case e:l=L()/12;break;case Y:l=L();break;case r:l=L()/3;break;case j:l=(D-$)/6048e5;break;case w:l=(D-$)/864e5;break;case k:l=D/x;break;case b:l=D/p;break;case c:l=D/d;break;default:l=D}return s?l:f.a(l)},i.daysInMonth=function(){return this.endOf(Y).$D},i.$locale=function(){return N[this.$L]},i.locale=function(t,a){if(!t)return this.$L;var s=this.clone(),l=Z(t,a,!0);return l&&(s.$L=l),s},i.clone=function(){return f.w(this.$d,this)},i.toDate=function(){return new Date(this.valueOf())},i.toJSON=function(){return this.isValid()?this.toISOString():null},i.toISOString=function(){return this.$d.toISOString()},i.toString=function(){return this.$d.toUTCString()},o}(),re=K.prototype;return _.prototype=re,[["$ms",O],["$s",c],["$m",b],["$H",k],["$W",w],["$M",Y],["$y",e],["$D",h]].forEach(function(o){re[o[1]]=function(i){return this.$g(i,o[0],o[1])}}),_.extend=function(o,i){return o.$i||(o(i,K,_),o.$i=!0),_},_.locale=Z,_.isDayjs=te,_.unix=function(o){return _(1e3*o)},_.en=N[z],_.Ls=N,_.p={},_})})(ce);var xe=ce.exports;const Oe=me(xe);function Te(C,y,d,p){if(!de(C))return C;y=$e(y,C);for(var x=-1,O=y.length,c=O-1,b=C;b!=null&&++x<O;){var k=ke(y[x]),w=d;if(k==="__proto__"||k==="constructor"||k==="prototype")return C;if(x!=c){var j=b[k];w=void 0,w===void 0&&(w=de(j)?j:Me(y[x+1])?[]:{})}_e(b,k,w),b=b[k]}return C}function J(C,y,d){return C==null?C:Te(C,y,d)}const Ce={key:0,class:"mb:24"},Ye={class:"form-table",role:"presentation"},Ie={key:0,class:"flex my:10 align-items:center font:medium"},Le={key:1,class:"description"},je={class:"mb:24"},Ae={class:"form-table",role:"presentation"},Fe={class:"flex gap-x:4"},He=["href"],qe={class:"flex align-items:center my:8"},Be=["checked","value"],Pe={class:"mb:24"},Ne={class:"form-table",role:"presentation"},We=["checked","value"],Ge=["checked","value"],Ee=["checked","value"],ze={class:"mb:24"},Ue={class:"form-table",role:"presentation"},Ve={class:"flex align-items:center"},Je=["value"],et={__name:"Index",setup(C){const y=Se(),d=De(),p=we(),x=R({key:null,is_activated:!1,opt_in_pre_release:!1}),O=R({last_generated:"",pending_task:!1,file_url:""}),c=R({}),b=R(null);pe(()=>{d.add("settings:fetch-license"),y.request({method:"GET",url:"/setting/license/index"}).then(r=>r.data).then(r=>{x.value=r.license}).catch(function(r){p.alert(r.message)}).finally(()=>{d.remove("settings:fetch-license")}),d.add("settings:fetch-cache"),y.request({method:"GET",url:"/setting/cache/index"}).then(r=>r.data).then(r=>{O.value=r.cache}).catch(function(r){p.alert(r.message)}).finally(()=>{d.remove("settings:fetch-cache")}),d.add("settings:fetch-options"),y.request({method:"GET",url:"/setting/option/index"}).then(r=>r.data).then(r=>{c.value=se(r.options)}).then(()=>{var r;b.value=(r=c.value.adobe_fonts)==null?void 0:r.kit}).catch(function(r){p.alert(r.message)}).finally(()=>{d.remove("settings:fetch-options")})}),ae(()=>x.value.key,async(r,e)=>{d.isBusy||r!==e&&(d.add("settings:store-license"),y.request({method:"POST",url:"/setting/license/store",data:{license:r}}).then(h=>h.data).then(h=>{var P,I,M,S;x.value=se(h.license),Object.keys(h.notice).length>0?(P=h.notice)!=null&&P.success?p.success((I=h.notice)==null?void 0:I.success):(M=h.notice)!=null&&M.error&&p.alert((S=h.notice)==null?void 0:S.error):p.success("License setting saved.")}).catch(function(h){p.alert(h.message)}).finally(()=>{d.remove("settings:store-license")}))}),ae(()=>{var r;return(r=c.value.adobe_fonts)==null?void 0:r.project_id},async(r,e)=>{if(!d.isBusy&&r!==e){if(b.value=null,r===null){Y();return}d.add("settings:fetch-adobe-fonts-kits"),y.request({method:"POST",url:"/setting/adobe-fonts/get-kits",data:{project_id:r}}).then(h=>h.data).then(h=>{b.value=h.data.kit,k(),j()}).catch(function(h){p.alert(h.response.data.message)}).finally(()=>{d.remove("settings:fetch-adobe-fonts-kits")})}});function k(){d.add("settings:store-options"),y.request({method:"POST",url:"/setting/option/store",data:{options:c.value}}).then(r=>r.data).then(r=>{c.value=se(r.options),p.success("Settings saved.")}).catch(function(r){p.alert(r.message)}).finally(()=>{d.remove("settings:store-options")})}function w(){d.add("settings:generate-cache"),y.request({method:"POST",url:"/setting/cache/generate"}).then(r=>r.data).then(r=>{O.value=r.cache}).catch(function(r){p.alert(r.message)}).finally(()=>{d.remove("settings:generate-cache")})}function j(){d.add("settings:sync-adobe-fonts"),y.request({method:"POST",url:"/setting/adobe-fonts/sync",data:{project_id:c.value.adobe_fonts.project_id,kit:b.value}}).then(r=>r.data).then(r=>{p.success("Adobe Fonts synced.")}).catch(function(r){p.alert(r.message)}).finally(()=>{d.remove("settings:sync-adobe-fonts")})}function Y(){d.add("settings:destroy-adobe-fonts"),y.request({method:"POST",url:"/setting/adobe-fonts/destroy"}).then(r=>r.data).then(r=>{p.success("Adobe Fonts cleared.")}).catch(function(r){p.alert(r.message)}).finally(()=>{d.remove("settings:destroy-adobe-fonts")})}return(r,e)=>{const h=ge("font-awesome-icon"),P=ve("ripple");return H(),q(ne,null,[r.yabeWebfont.lite_edition?X("",!0):(H(),q("div",Ce,[n("table",Ye,[n("tbody",null,[n("tr",null,[e[8]||(e[8]=n("th",{scope:"row"},[n("label",null,"License Key")],-1)),n("td",null,[oe(n("input",{name:"license_key",type:"password","onUpdate:modelValue":e[0]||(e[0]=I=>x.value.key=I),class:"min-w:25rem"},null,512),[[ye,x.value.key,void 0,{lazy:!0}]]),x.value.is_activated?(H(),q("div",Ie,e[6]||(e[6]=[B(" Status: "),n("span",{class:"bg:green-80 fg:white font:regular ml:10 px:6 py:4 r:4 user-select:none"}," active ",-1)]))):(H(),q("p",Le,e[7]||(e[7]=[B("Enter your "),n("a",{href:"https://webfont.yabe.land/#pricing-plans",target:"_blank"},"license key",-1),B(" receive the update of the latest version.")])))])])])])])),n("div",je,[e[16]||(e[16]=n("h2",{class:"title"},"Performance",-1)),n("table",Ae,[n("tbody",null,[n("tr",null,[e[12]||(e[12]=n("th",{scope:"row"}," Cached CSS ",-1)),n("td",null,[n("p",Fe,[e[9]||(e[9]=n("span",{class:"font:medium"}," Last generated: ",-1)),O.value.last_generated?(H(),q(ne,{key:0},[B(be(new(v(Oe))(O.value.last_generated*1e3).format("YYYY-MM-DD HH:mm:ss"))+" ",1),n("a",{href:`${O.value.file_url}?ver=${O.value.last_generated}`,target:"_blank"},[le(h,{icon:["far","arrow-up-right-from-square"],class:"font:13 translateY(-6)"})],8,He)],64)):X("",!0),n("span",{class:ue([v(d).isBusy&&(v(d).hasTask("settings:generate-cache")||v(d).hasTask("settings:fetch-cache"))?"visible":"hidden","spinner"])},null,2)]),e[11]||(e[11]=n("p",{class:"description"}," Serve the CSS file from the cache instead of generating it on the fly. ",-1)),n("div",qe,[n("button",{type:"button",onClick:w,class:"button button-secondary"}," Re-generate cache "),O.value.pending_task?(H(),q(ne,{key:0},[le(h,{icon:["fas","hourglass-clock"],class:"ml:12 fg:gray-50"}),e[10]||(e[10]=n("span",{class:"fg:gray-50 pl:4"}," There is a scheduled task to generate the cache. ",-1))],64)):X("",!0)])])]),n("tr",null,[e[15]||(e[15]=n("th",{scope:"row"},[n("label",null,"Cache loading method")],-1)),n("td",null,[n("input",{id:"inline-print",name:"inline_print",type:"checkbox",checked:v(A)(c.value,"cache.inline_print",!1),value:v(A)(c.value,"cache.inline_print",!1),onInput:e[1]||(e[1]=I=>{var M,S;return v(J)(c.value,"cache.inline_print",!((S=(M=c.value)==null?void 0:M.cache)!=null&&S.inline_print))})},null,40,Be),e[13]||(e[13]=n("label",{for:"inline-print"}," Inline style",-1)),e[14]||(e[14]=n("p",{class:"description"},"Load font style via inline styles instead of external file.",-1))])])])])]),n("div",Pe,[e[26]||(e[26]=n("h2",{class:"title"},"Misc.",-1)),n("table",Ne,[n("tbody",null,[n("tr",null,[e[19]||(e[19]=n("th",{scope:"row"},[n("label",null,"Media Library")],-1)),n("td",null,[n("input",{id:"media-library",name:"hide_media_library",type:"checkbox",checked:v(A)(c.value,"misc.hide_media_library",!1),value:v(A)(c.value,"misc.hide_media_library",!1),onInput:e[2]||(e[2]=I=>{var M,S;return v(J)(c.value,"misc.hide_media_library",!((S=(M=c.value)==null?void 0:M.misc)!=null&&S.hide_media_library))})},null,40,We),e[17]||(e[17]=n("label",{for:"media-library"}," Hide font files from Media Library ",-1)),e[18]||(e[18]=n("p",{class:"description"}," Only show items in the Media Library that satisfy the following conditions: original allowed mime types. ",-1))])]),n("tr",null,[e[22]||(e[22]=n("th",{scope:"row"},[n("label",null,"Bundled export")],-1)),n("td",null,[n("input",{id:"export-bundle-binary",name:"export_bundle_binary",type:"checkbox",checked:v(A)(c.value,"misc.export_bundle_binary",!1),value:v(A)(c.value,"misc.export_bundle_binary",!1),onInput:e[3]||(e[3]=I=>{var M,S;return v(J)(c.value,"misc.export_bundle_binary",!((S=(M=c.value)==null?void 0:M.misc)!=null&&S.export_bundle_binary))})},null,40,Ge),e[20]||(e[20]=n("label",{for:"export-bundle-binary"}," Bundle file on the exported file ",-1)),e[21]||(e[21]=n("p",{class:"description"}," Include font binary file on the exported file. This will increase the file size. ",-1))])]),n("tr",null,[e[25]||(e[25]=n("th",{scope:"row"},[n("label",null,"Disable user's Google Fonts")],-1)),n("td",null,[n("input",{id:"disable-user-google-fonts",name:"disable_user_google_fonts",type:"checkbox",checked:v(A)(c.value,"misc.disable_user_google_fonts",!1),value:v(A)(c.value,"misc.disable_user_google_fonts",!1),onInput:e[4]||(e[4]=I=>{var M,S;return v(J)(c.value,"misc.disable_user_google_fonts",!((S=(M=c.value)==null?void 0:M.misc)!=null&&S.disable_user_google_fonts))})},null,40,Ee),e[23]||(e[23]=n("label",{for:"disable-user-google-fonts"}," Disable Google Fonts API that loaded manually ",-1)),e[24]||(e[24]=n("p",{class:"description"},[B(" Scan and disable Google Fonts API that loaded manually by the theme or plugin through "),n("code",null,"wp_enqueue_style"),B(" function. ")],-1))])])])])]),n("div",ze,[e[29]||(e[29]=n("h2",{class:"title"},"Adobe Fonts",-1)),n("table",Ue,[n("tbody",null,[n("tr",null,[e[28]||(e[28]=n("th",{scope:"row"},[n("label",null,"Project ID")],-1)),n("td",null,[n("div",Ve,[n("input",{type:"text",id:"adobe-font-project-id",name:"adobe_font_project_id",value:v(A)(c.value,"adobe_fonts.project_id",null),onChange:e[5]||(e[5]=I=>v(J)(c.value,"adobe_fonts.project_id",I.target.value===""?null:I.target.value)),class:""},null,40,Je),b.value?(H(),q("button",{key:0,type:"button",onClick:j,class:"button button-secondary"}," Sync fonts ")):X("",!0),n("span",{class:ue([v(d).isBusy&&(v(d).hasTask("settings:fetch-adobe-fonts-kits")||v(d).hasTask("settings:sync-adobe-fonts-kits"))?"visible":"hidden","spinner"])},null,2)]),e[27]||(e[27]=n("p",{class:"description"},[B(" Get your Project ID from "),n("a",{href:"https://fonts.adobe.com/my_fonts#web_projects-section",target:"_blank"},"https://fonts.adobe.com/my_fonts#web_projects-section")],-1))])])])])]),oe((H(),q("button",{type:"button",onClick:k,class:"button button-primary"},e[30]||(e[30]=[B("Save Changes")]))),[[P]])],64)}}};export{et as default};
