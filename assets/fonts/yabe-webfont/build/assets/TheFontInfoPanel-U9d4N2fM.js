import{a as xt,S as Lt,c as Ct,_ as Z}from"./sortBy-Dx0BSJOJ.js";import{S as J}from"./_Uint8Array-CGOLgoAz.js";import{e as F,m as O,r as at,g as vt,o as _,c as E,b as u,a as M,w as tt,s as P,u as U,t as w,z as Nt,h as D,v as Rt,L as Ot,j as ut,y as Ft,d as H,k as z,G as Tt,q as Dt,I as ft,S as dt,F as Vt,i as jt}from"./app-B90gRHc9.js";import{u as Pt,_ as Bt}from"./vue-contenteditable.es-CFT2Ngme.js";import{u as zt}from"./notifier-BHyuOhoy.js";import{a as Kt}from"./index-Irukiw1G.js";function Wt(e,t,s,n){for(var i=e.length,r=s+-1;++r<i;)if(t(e[r],r,e))return r;return-1}function Ut(e){return e!==e}function Ht(e,t,s){for(var n=s-1,i=e.length;++n<i;)if(e[n]===t)return n;return-1}function Yt(e,t,s){return t===t?Ht(e,t,s):Wt(e,Ut,s)}function Gt(e,t){var s=e==null?0:e.length;return!!s&&Yt(e,t,0)>-1}function Xt(){}var Qt=1/0,Zt=J&&1/xt(new J([,-0]))[1]==Qt?function(e){return new J(e)}:Xt,Jt=200;function qt(e,t,s){var n=-1,i=Gt,r=e.length,o=!0,a=[],c=a;if(r>=Jt){var h=Zt(e);if(h)return xt(h);o=!1,i=Ct,c=new Lt}else c=a;t:for(;++n<r;){var l=e[n],f=l;if(l=l!==0?l:0,o&&f===f){for(var g=c.length;g--;)if(c[g]===f)continue t;a.push(l)}else i(c,f,s)||(c!==a&&c.push(f),a.push(l))}return a}function Ys(e){return e&&e.length?qt(e):[]}const te={class:"font-item__header flex align-items:stretch {bl:1;br:0}>*+* {by:0}>*+* {b:dashed}>*+* {b:gray-30/.5}>*+*"},ee={class:"flex p:12 align-items:center"},se=["title"],ne=["title"],ie=["title"],re={key:0,class:"font-item__body {bx:0}>*+* {bt:1;bb:0}>*+* {b:solid}>*+* {b:gray-30/.5}>*+*"},oe={class:"font-item__body-meta grid grid-cols:12 align-items:stretch {bl:1;br:0}>*+* {by:0}>*+* {b:dashed}>*+* {b:gray-30/.5}>*+*"},ae={class:"flex grid-col-span:2 flex:col gap:6 p:12"},le=["for"],ce=["id"],he={class:"flex grid-col-span:4 flex:col gap:6 p:12"},ue=["for"],fe=["id"],de={class:"flex grid-col-span:4 flex:col gap:6 p:12"},ge=["for"],pe=["id"],me={class:"flex grid-col-span:2 flex:col gap:6 p:12"},be=["for"],ye=["for"],xe=["id"],Gs={__name:"TheFontFace",props:{item:{type:Object,required:!0},preview:{type:Object,required:!0},isVariable:{type:Boolean},fontData:{type:Object}},setup(e){const t=e,s=F(!1),n=F(null),i=F(null),r=F(null);function o(){return{fontFamily:`'${t.preview.fontFamily}'`,fontSize:`${t.preview.fontSize}px`,fontWeight:t.item.weight!==0?t.item.weight:t.preview.weight.current,fontStyle:t.item.style,fontStretch:t.preview.width.current!==0?`${t.preview.width.current}%`:"100%"}}const a=O(()=>{switch(t.item.weight!==0?t.item.weight:Math.round(t.preview.weight.current/100)*100){case 100:return"Thin";case 200:return"Extra Light";case 300:return"Light";case 500:return"Medium";case 600:return"Semi Bold";case 700:return"Bold";case 800:return"Extra Bold";case 900:return"Black";case 400:default:return"Regular"}}),c=O(()=>{var h;if(t.isVariable){let l=(h=t.fontData)==null?void 0:h.axes.find(f=>f.tag==="slnt");if(l!==void 0)return`oblique ${l.max*-1}deg ${l.min*-1}deg`}return t.item.style});return(h,l)=>{const f=at("font-awesome-icon"),g=vt("ripple");return _(),E("div",{class:P([{"b:green-60":e.item.isEnabled},"font-item rel bg:white b:1|solid|gray-30/.5 {bt:1;bb:0}>*+* {bx:0}>*+* {b:solid}>*+* {b:gray-30/.5}>*+*"])},[u("div",te,[u("div",ee,[M(U(Pt),{modelValue:e.item.isEnabled,"onUpdate:modelValue":l[0]||(l[0]=p=>e.item.isEnabled=p),class:P([[e.item.isEnabled?"bg:sky-60":"opacity:.5 bg:gray-20"],"rel inline-flex p:0 h:24 w:44 flex-shrink:0 cursor:pointer rounded b:2 b:transparent transition-property:color,background-color,border-color,text-decoration-color,fill,stroke transition-duration:200 transition-timing-function:cubic-bezier(0.4,0,0.2,1) box-shadow:rgb(255,255,255)|0|0|0|2,rgb(14,165,233)|0|0|0|4,rgba(0,0,0,0)|0|0|0|0:focus outline:2|solid|transparent:focus"])},{default:tt(()=>[u("span",{class:P([[e.item.isEnabled?"translateX(20)":"translateX(0)"],"pointer-events:none rel inline-block font:12 h:20 w:20 rounded bg:white transition-property:color,background-color,border-color,text-decoration-color,fill,stroke,opacity,box-shadow,transform,filter,backdrop-filter transition-duration:200 transition-timing-function:cubic-bezier(0.4,0,0.2,1) box-shadow:rgb(255,255,255)|0|0|0|0,rgba(59,130,246,0.5)|0|0|0|0,rgba(0,0,0,0.1)|0|1|3|0,rgba(0,0,0,0.1)|0|1|2|-1"])},[u("span",{"aria-hidden":"true",class:P([[e.item.isEnabled?"opacity:0 transition-timing-function:ease-out transition-duration:100":"opacity:1 transition-timing-function:ease-in transition-duration:200"],"abs inset:0 flex h:full w:full align-items:center justify-content:center tw-transition-opacity"])},[M(f,{icon:["fas","xmark"],class:"fg:gray-60"})],2),u("span",{"aria-hidden":"true",class:P([[e.item.isEnabled?"opacity:1 transition-timing-function:ease-in transition-duration:200":"opacity:0 transition-timing-function:ease-out transition-duration:100"],"abs inset:0 flex h:full w:full align-items:center justify-content:center tw-transition-opacity"])},[M(f,{icon:["fas","check"],class:"fg:sky-60"})],2)],2)]),_:1},8,["modelValue","class"])]),u("div",{ref_key:"weightStyleTooltip",ref:n,class:"font-item__weight flex-grow:0 flex-shrink:0 flex p:12 align-items:center {ml:8}>*+*"},[e.item.weight===0?(_(),E("span",{key:0,title:a.value,class:"opacity:.7 font:14 lh:20px fg:#a7aaad px:20 py:4 r:2 b:1|solid|#dcdcde bg:#f6f7f7"},w(e.preview.weight.current),9,se)):(_(),E("span",{key:1,title:a.value,class:"opacity:.7 font:14 lh:20px fg:#a7aaad px:20 py:4 r:2 b:1|solid|#dcdcde bg:#f6f7f7"},w(e.item.weight),9,ne)),u("span",{class:P([{italic:c.value==="italic"},"opacity:.7 font:14 lh:20px capitalize text:left fg:#a7aaad white-space:nowrap text:clip overflow:hidden px:8 py:4 w-12 r:2 b:1|solid|#dcdcde bg:#f6f7f7"]),title:c.value},w(c.value),11,ie),M(Z,{"target-ref":n.value,content:"Font weight & style"},null,8,["target-ref"])],512),u("div",{ref_key:"previewTextTooltip",ref:i,class:"flex:1|1|0% flex p:12 align-items:center"},[M(U(Bt),{tag:"div",modelValue:e.preview.text,"onUpdate:modelValue":l[1]||(l[1]=p=>e.preview.text=p),style:Nt(o()),class:"preview-text lh:1.25"},null,8,["modelValue","style"]),M(Z,{"target-ref":i.value,content:h.__("Editable preview text","yabe-webfont")},null,8,["target-ref","content"])],512),D((_(),E("button",{type:"button",ref_key:"editTooltip",ref:r,onClick:l[2]||(l[2]=p=>s.value=!s.value),class:"button flex align-items:center px:16 py:0.5 focus:shadow-none cursor:pointer bg:inherit b:none"},[M(f,{icon:["fas","pen-to-square"],class:"h:20 w:20 fg:blue-80 fg:blue-60:hover fill:current"}),M(Z,{"target-ref":r.value,content:h.__("Edit","yabe-webfont")},null,8,["target-ref","content"])])),[[g]])]),s.value?(_(),E("div",re,[u("div",oe,[u("div",ae,[u("label",{for:`display-${e.item.id}`,class:"font:14 lh:20px font:semibold"},"Font Display",8,le),D(u("select",{name:"display",id:`display-${e.item.id}`,"onUpdate:modelValue":l[3]||(l[3]=p=>e.item.display=p),class:"capitalize {capitalize}_option"},l[7]||(l[7]=[Ot('<option></option><option value="auto">auto</option><option value="block">block</option><option value="swap">swap</option><option value="fallback">fallback</option><option value="optional">optional</option>',6)]),8,ce),[[Rt,e.item.display]])]),u("div",he,[u("label",{for:`comment-${e.item.id}`,class:"font:14 lh:20px font:semibold"},"Comment",8,ue),D(u("input",{type:"text",name:"comment",id:`comment-${e.item.id}`,"onUpdate:modelValue":l[4]||(l[4]=p=>e.item.comment=p),placeholder:""},null,8,fe),[[ut,e.item.comment]])]),u("div",de,[u("label",{for:`selector-${e.item.id}`,class:"font:14 lh:20px font:semibold"},"CSS Selector",8,ge),D(u("input",{type:"text",name:"selector",id:`selector-${e.item.id}`,"onUpdate:modelValue":l[5]||(l[5]=p=>e.item.selector=p),placeholder:"h1, h2, .poetry, .haiku, p, span, #lyric, #description",autocomplete:"off"},null,8,pe),[[ut,e.item.selector]])]),u("div",me,[u("label",{for:`preload-${e.item.id}`,class:"font:14 lh:20px font:semibold"},"Preload",8,be),u("label",{for:`preload-${e.item.id}`,class:"font:14 lh:20px"},[D(u("input",{type:"checkbox",name:"preload",id:`preload-${e.item.id}`,"onUpdate:modelValue":l[6]||(l[6]=p=>e.item.preload=p)},null,8,xe),[[Ft,e.item.preload]]),l[8]||(l[8]=H(" Preload files "))],8,ye)])])])):z("",!0)],2)}}};function C(e){return Array.isArray?Array.isArray(e):_t(e)==="[object Array]"}const ve=1/0;function we(e){if(typeof e=="string")return e;let t=e+"";return t=="0"&&1/e==-ve?"-0":t}function Me(e){return e==null?"":we(e)}function L(e){return typeof e=="string"}function wt(e){return typeof e=="number"}function _e(e){return e===!0||e===!1||Se(e)&&_t(e)=="[object Boolean]"}function Mt(e){return typeof e=="object"}function Se(e){return Mt(e)&&e!==null}function $(e){return e!=null}function q(e){return!e.trim().length}function _t(e){return e==null?e===void 0?"[object Undefined]":"[object Null]":Object.prototype.toString.call(e)}const Ee="Incorrect 'index' type",$e=e=>`Invalid value for key ${e}`,ke=e=>`Pattern length exceeds max of ${e}.`,Ie=e=>`Missing ${e} property in key`,Ae=e=>`Property 'weight' in key '${e}' must be a positive integer`,gt=Object.prototype.hasOwnProperty;class Le{constructor(t){this._keys=[],this._keyMap={};let s=0;t.forEach(n=>{let i=St(n);s+=i.weight,this._keys.push(i),this._keyMap[i.id]=i,s+=i.weight}),this._keys.forEach(n=>{n.weight/=s})}get(t){return this._keyMap[t]}keys(){return this._keys}toJSON(){return JSON.stringify(this._keys)}}function St(e){let t=null,s=null,n=null,i=1,r=null;if(L(e)||C(e))n=e,t=pt(e),s=et(e);else{if(!gt.call(e,"name"))throw new Error(Ie("name"));const o=e.name;if(n=o,gt.call(e,"weight")&&(i=e.weight,i<=0))throw new Error(Ae(o));t=pt(o),s=et(o),r=e.getFn}return{path:t,id:s,weight:i,src:n,getFn:r}}function pt(e){return C(e)?e:e.split(".")}function et(e){return C(e)?e.join("."):e}function Ce(e,t){let s=[],n=!1;const i=(r,o,a)=>{if($(r))if(!o[a])s.push(r);else{let c=o[a];const h=r[c];if(!$(h))return;if(a===o.length-1&&(L(h)||wt(h)||_e(h)))s.push(Me(h));else if(C(h)){n=!0;for(let l=0,f=h.length;l<f;l+=1)i(h[l],o,a+1)}else o.length&&i(h,o,a+1)}};return i(e,L(t)?t.split("."):t,0),n?s:s[0]}const Ne={includeMatches:!1,findAllMatches:!1,minMatchCharLength:1},Re={isCaseSensitive:!1,includeScore:!1,keys:[],shouldSort:!0,sortFn:(e,t)=>e.score===t.score?e.idx<t.idx?-1:1:e.score<t.score?-1:1},Oe={location:0,threshold:.6,distance:100},Fe={useExtendedSearch:!1,getFn:Ce,ignoreLocation:!1,ignoreFieldNorm:!1,fieldNormWeight:1};var d={...Re,...Ne,...Oe,...Fe};const Te=/[^ ]+/g;function De(e=1,t=3){const s=new Map,n=Math.pow(10,t);return{get(i){const r=i.match(Te).length;if(s.has(r))return s.get(r);const o=1/Math.pow(r,.5*e),a=parseFloat(Math.round(o*n)/n);return s.set(r,a),a},clear(){s.clear()}}}class lt{constructor({getFn:t=d.getFn,fieldNormWeight:s=d.fieldNormWeight}={}){this.norm=De(s,3),this.getFn=t,this.isCreated=!1,this.setIndexRecords()}setSources(t=[]){this.docs=t}setIndexRecords(t=[]){this.records=t}setKeys(t=[]){this.keys=t,this._keysMap={},t.forEach((s,n)=>{this._keysMap[s.id]=n})}create(){this.isCreated||!this.docs.length||(this.isCreated=!0,L(this.docs[0])?this.docs.forEach((t,s)=>{this._addString(t,s)}):this.docs.forEach((t,s)=>{this._addObject(t,s)}),this.norm.clear())}add(t){const s=this.size();L(t)?this._addString(t,s):this._addObject(t,s)}removeAt(t){this.records.splice(t,1);for(let s=t,n=this.size();s<n;s+=1)this.records[s].i-=1}getValueForItemAtKeyId(t,s){return t[this._keysMap[s]]}size(){return this.records.length}_addString(t,s){if(!$(t)||q(t))return;let n={v:t,i:s,n:this.norm.get(t)};this.records.push(n)}_addObject(t,s){let n={i:s,$:{}};this.keys.forEach((i,r)=>{let o=i.getFn?i.getFn(t):this.getFn(t,i.path);if($(o)){if(C(o)){let a=[];const c=[{nestedArrIndex:-1,value:o}];for(;c.length;){const{nestedArrIndex:h,value:l}=c.pop();if($(l))if(L(l)&&!q(l)){let f={v:l,i:h,n:this.norm.get(l)};a.push(f)}else C(l)&&l.forEach((f,g)=>{c.push({nestedArrIndex:g,value:f})})}n.$[r]=a}else if(L(o)&&!q(o)){let a={v:o,n:this.norm.get(o)};n.$[r]=a}}}),this.records.push(n)}toJSON(){return{keys:this.keys,records:this.records}}}function Et(e,t,{getFn:s=d.getFn,fieldNormWeight:n=d.fieldNormWeight}={}){const i=new lt({getFn:s,fieldNormWeight:n});return i.setKeys(e.map(St)),i.setSources(t),i.create(),i}function Ve(e,{getFn:t=d.getFn,fieldNormWeight:s=d.fieldNormWeight}={}){const{keys:n,records:i}=e,r=new lt({getFn:t,fieldNormWeight:s});return r.setKeys(n),r.setIndexRecords(i),r}function W(e,{errors:t=0,currentLocation:s=0,expectedLocation:n=0,distance:i=d.distance,ignoreLocation:r=d.ignoreLocation}={}){const o=t/e.length;if(r)return o;const a=Math.abs(n-s);return i?o+a/i:a?1:o}function je(e=[],t=d.minMatchCharLength){let s=[],n=-1,i=-1,r=0;for(let o=e.length;r<o;r+=1){let a=e[r];a&&n===-1?n=r:!a&&n!==-1&&(i=r-1,i-n+1>=t&&s.push([n,i]),n=-1)}return e[r-1]&&r-n>=t&&s.push([n,r-1]),s}const V=32;function Pe(e,t,s,{location:n=d.location,distance:i=d.distance,threshold:r=d.threshold,findAllMatches:o=d.findAllMatches,minMatchCharLength:a=d.minMatchCharLength,includeMatches:c=d.includeMatches,ignoreLocation:h=d.ignoreLocation}={}){if(t.length>V)throw new Error(ke(V));const l=t.length,f=e.length,g=Math.max(0,Math.min(n,f));let p=r,y=g;const x=a>1||c,m=x?Array(f):[];let b;for(;(b=e.indexOf(t,y))>-1;){let k=W(t,{currentLocation:b,expectedLocation:g,distance:i,ignoreLocation:h});if(p=Math.min(k,p),y=b+l,x){let N=0;for(;N<l;)m[b+N]=1,N+=1}}y=-1;let A=[],v=1,S=l+f;const G=1<<l-1;for(let k=0;k<l;k+=1){let N=0,R=S;for(;N<R;)W(t,{errors:k,currentLocation:g+R,expectedLocation:g,distance:i,ignoreLocation:h})<=p?N=R:S=R,R=Math.floor((S-N)/2+N);S=R;let ct=Math.max(1,g-R+1),Q=o?f:Math.min(g+R,f)+l,j=Array(Q+2);j[Q+1]=(1<<k)-1;for(let I=Q;I>=ct;I-=1){let K=I-1,ht=s[e.charAt(K)];if(x&&(m[K]=+!!ht),j[I]=(j[I+1]<<1|1)&ht,k&&(j[I]|=(A[I+1]|A[I])<<1|1|A[I+1]),j[I]&G&&(v=W(t,{errors:k,currentLocation:K,expectedLocation:g,distance:i,ignoreLocation:h}),v<=p)){if(p=v,y=K,y<=g)break;ct=Math.max(1,2*g-y)}}if(W(t,{errors:k+1,currentLocation:g,expectedLocation:g,distance:i,ignoreLocation:h})>p)break;A=j}const X={isMatch:y>=0,score:Math.max(.001,v)};if(x){const k=je(m,a);k.length?c&&(X.indices=k):X.isMatch=!1}return X}function Be(e){let t={};for(let s=0,n=e.length;s<n;s+=1){const i=e.charAt(s);t[i]=(t[i]||0)|1<<n-s-1}return t}class $t{constructor(t,{location:s=d.location,threshold:n=d.threshold,distance:i=d.distance,includeMatches:r=d.includeMatches,findAllMatches:o=d.findAllMatches,minMatchCharLength:a=d.minMatchCharLength,isCaseSensitive:c=d.isCaseSensitive,ignoreLocation:h=d.ignoreLocation}={}){if(this.options={location:s,threshold:n,distance:i,includeMatches:r,findAllMatches:o,minMatchCharLength:a,isCaseSensitive:c,ignoreLocation:h},this.pattern=c?t:t.toLowerCase(),this.chunks=[],!this.pattern.length)return;const l=(g,p)=>{this.chunks.push({pattern:g,alphabet:Be(g),startIndex:p})},f=this.pattern.length;if(f>V){let g=0;const p=f%V,y=f-p;for(;g<y;)l(this.pattern.substr(g,V),g),g+=V;if(p){const x=f-V;l(this.pattern.substr(x),x)}}else l(this.pattern,0)}searchIn(t){const{isCaseSensitive:s,includeMatches:n}=this.options;if(s||(t=t.toLowerCase()),this.pattern===t){let y={isMatch:!0,score:0};return n&&(y.indices=[[0,t.length-1]]),y}const{location:i,distance:r,threshold:o,findAllMatches:a,minMatchCharLength:c,ignoreLocation:h}=this.options;let l=[],f=0,g=!1;this.chunks.forEach(({pattern:y,alphabet:x,startIndex:m})=>{const{isMatch:b,score:A,indices:v}=Pe(t,y,x,{location:i+m,distance:r,threshold:o,findAllMatches:a,minMatchCharLength:c,includeMatches:n,ignoreLocation:h});b&&(g=!0),f+=A,b&&v&&(l=[...l,...v])});let p={isMatch:g,score:g?f/this.chunks.length:1};return g&&n&&(p.indices=l),p}}class T{constructor(t){this.pattern=t}static isMultiMatch(t){return mt(t,this.multiRegex)}static isSingleMatch(t){return mt(t,this.singleRegex)}search(){}}function mt(e,t){const s=e.match(t);return s?s[1]:null}class ze extends T{constructor(t){super(t)}static get type(){return"exact"}static get multiRegex(){return/^="(.*)"$/}static get singleRegex(){return/^=(.*)$/}search(t){const s=t===this.pattern;return{isMatch:s,score:s?0:1,indices:[0,this.pattern.length-1]}}}class Ke extends T{constructor(t){super(t)}static get type(){return"inverse-exact"}static get multiRegex(){return/^!"(.*)"$/}static get singleRegex(){return/^!(.*)$/}search(t){const n=t.indexOf(this.pattern)===-1;return{isMatch:n,score:n?0:1,indices:[0,t.length-1]}}}class We extends T{constructor(t){super(t)}static get type(){return"prefix-exact"}static get multiRegex(){return/^\^"(.*)"$/}static get singleRegex(){return/^\^(.*)$/}search(t){const s=t.startsWith(this.pattern);return{isMatch:s,score:s?0:1,indices:[0,this.pattern.length-1]}}}class Ue extends T{constructor(t){super(t)}static get type(){return"inverse-prefix-exact"}static get multiRegex(){return/^!\^"(.*)"$/}static get singleRegex(){return/^!\^(.*)$/}search(t){const s=!t.startsWith(this.pattern);return{isMatch:s,score:s?0:1,indices:[0,t.length-1]}}}class He extends T{constructor(t){super(t)}static get type(){return"suffix-exact"}static get multiRegex(){return/^"(.*)"\$$/}static get singleRegex(){return/^(.*)\$$/}search(t){const s=t.endsWith(this.pattern);return{isMatch:s,score:s?0:1,indices:[t.length-this.pattern.length,t.length-1]}}}class Ye extends T{constructor(t){super(t)}static get type(){return"inverse-suffix-exact"}static get multiRegex(){return/^!"(.*)"\$$/}static get singleRegex(){return/^!(.*)\$$/}search(t){const s=!t.endsWith(this.pattern);return{isMatch:s,score:s?0:1,indices:[0,t.length-1]}}}class kt extends T{constructor(t,{location:s=d.location,threshold:n=d.threshold,distance:i=d.distance,includeMatches:r=d.includeMatches,findAllMatches:o=d.findAllMatches,minMatchCharLength:a=d.minMatchCharLength,isCaseSensitive:c=d.isCaseSensitive,ignoreLocation:h=d.ignoreLocation}={}){super(t),this._bitapSearch=new $t(t,{location:s,threshold:n,distance:i,includeMatches:r,findAllMatches:o,minMatchCharLength:a,isCaseSensitive:c,ignoreLocation:h})}static get type(){return"fuzzy"}static get multiRegex(){return/^"(.*)"$/}static get singleRegex(){return/^(.*)$/}search(t){return this._bitapSearch.searchIn(t)}}class It extends T{constructor(t){super(t)}static get type(){return"include"}static get multiRegex(){return/^'"(.*)"$/}static get singleRegex(){return/^'(.*)$/}search(t){let s=0,n;const i=[],r=this.pattern.length;for(;(n=t.indexOf(this.pattern,s))>-1;)s=n+r,i.push([n,s-1]);const o=!!i.length;return{isMatch:o,score:o?0:1,indices:i}}}const st=[ze,It,We,Ue,Ye,He,Ke,kt],bt=st.length,Ge=/ +(?=(?:[^\"]*\"[^\"]*\")*[^\"]*$)/,Xe="|";function Qe(e,t={}){return e.split(Xe).map(s=>{let n=s.trim().split(Ge).filter(r=>r&&!!r.trim()),i=[];for(let r=0,o=n.length;r<o;r+=1){const a=n[r];let c=!1,h=-1;for(;!c&&++h<bt;){const l=st[h];let f=l.isMultiMatch(a);f&&(i.push(new l(f,t)),c=!0)}if(!c)for(h=-1;++h<bt;){const l=st[h];let f=l.isSingleMatch(a);if(f){i.push(new l(f,t));break}}}return i})}const Ze=new Set([kt.type,It.type]);class Je{constructor(t,{isCaseSensitive:s=d.isCaseSensitive,includeMatches:n=d.includeMatches,minMatchCharLength:i=d.minMatchCharLength,ignoreLocation:r=d.ignoreLocation,findAllMatches:o=d.findAllMatches,location:a=d.location,threshold:c=d.threshold,distance:h=d.distance}={}){this.query=null,this.options={isCaseSensitive:s,includeMatches:n,minMatchCharLength:i,findAllMatches:o,ignoreLocation:r,location:a,threshold:c,distance:h},this.pattern=s?t:t.toLowerCase(),this.query=Qe(this.pattern,this.options)}static condition(t,s){return s.useExtendedSearch}searchIn(t){const s=this.query;if(!s)return{isMatch:!1,score:1};const{includeMatches:n,isCaseSensitive:i}=this.options;t=i?t:t.toLowerCase();let r=0,o=[],a=0;for(let c=0,h=s.length;c<h;c+=1){const l=s[c];o.length=0,r=0;for(let f=0,g=l.length;f<g;f+=1){const p=l[f],{isMatch:y,indices:x,score:m}=p.search(t);if(y){if(r+=1,a+=m,n){const b=p.constructor.type;Ze.has(b)?o=[...o,...x]:o.push(x)}}else{a=0,r=0,o.length=0;break}}if(r){let f={isMatch:!0,score:a/r};return n&&(f.indices=o),f}}return{isMatch:!1,score:1}}}const nt=[];function qe(...e){nt.push(...e)}function it(e,t){for(let s=0,n=nt.length;s<n;s+=1){let i=nt[s];if(i.condition(e,t))return new i(e,t)}return new $t(e,t)}const Y={AND:"$and",OR:"$or"},rt={PATH:"$path",PATTERN:"$val"},ot=e=>!!(e[Y.AND]||e[Y.OR]),ts=e=>!!e[rt.PATH],es=e=>!C(e)&&Mt(e)&&!ot(e),yt=e=>({[Y.AND]:Object.keys(e).map(t=>({[t]:e[t]}))});function At(e,t,{auto:s=!0}={}){const n=i=>{let r=Object.keys(i);const o=ts(i);if(!o&&r.length>1&&!ot(i))return n(yt(i));if(es(i)){const c=o?i[rt.PATH]:r[0],h=o?i[rt.PATTERN]:i[c];if(!L(h))throw new Error($e(c));const l={keyId:et(c),pattern:h};return s&&(l.searcher=it(h,t)),l}let a={children:[],operator:r[0]};return r.forEach(c=>{const h=i[c];C(h)&&h.forEach(l=>{a.children.push(n(l))})}),a};return ot(e)||(e=yt(e)),n(e)}function ss(e,{ignoreFieldNorm:t=d.ignoreFieldNorm}){e.forEach(s=>{let n=1;s.matches.forEach(({key:i,norm:r,score:o})=>{const a=i?i.weight:null;n*=Math.pow(o===0&&a?Number.EPSILON:o,(a||1)*(t?1:r))}),s.score=n})}function ns(e,t){const s=e.matches;t.matches=[],$(s)&&s.forEach(n=>{if(!$(n.indices)||!n.indices.length)return;const{indices:i,value:r}=n;let o={indices:i,value:r};n.key&&(o.key=n.key.src),n.idx>-1&&(o.refIndex=n.idx),t.matches.push(o)})}function is(e,t){t.score=e.score}function rs(e,t,{includeMatches:s=d.includeMatches,includeScore:n=d.includeScore}={}){const i=[];return s&&i.push(ns),n&&i.push(is),e.map(r=>{const{idx:o}=r,a={item:t[o],refIndex:o};return i.length&&i.forEach(c=>{c(r,a)}),a})}class B{constructor(t,s={},n){this.options={...d,...s},this.options.useExtendedSearch,this._keyStore=new Le(this.options.keys),this.setCollection(t,n)}setCollection(t,s){if(this._docs=t,s&&!(s instanceof lt))throw new Error(Ee);this._myIndex=s||Et(this.options.keys,this._docs,{getFn:this.options.getFn,fieldNormWeight:this.options.fieldNormWeight})}add(t){$(t)&&(this._docs.push(t),this._myIndex.add(t))}remove(t=()=>!1){const s=[];for(let n=0,i=this._docs.length;n<i;n+=1){const r=this._docs[n];t(r,n)&&(this.removeAt(n),n-=1,i-=1,s.push(r))}return s}removeAt(t){this._docs.splice(t,1),this._myIndex.removeAt(t)}getIndex(){return this._myIndex}search(t,{limit:s=-1}={}){const{includeMatches:n,includeScore:i,shouldSort:r,sortFn:o,ignoreFieldNorm:a}=this.options;let c=L(t)?L(this._docs[0])?this._searchStringList(t):this._searchObjectList(t):this._searchLogical(t);return ss(c,{ignoreFieldNorm:a}),r&&c.sort(o),wt(s)&&s>-1&&(c=c.slice(0,s)),rs(c,this._docs,{includeMatches:n,includeScore:i})}_searchStringList(t){const s=it(t,this.options),{records:n}=this._myIndex,i=[];return n.forEach(({v:r,i:o,n:a})=>{if(!$(r))return;const{isMatch:c,score:h,indices:l}=s.searchIn(r);c&&i.push({item:r,idx:o,matches:[{score:h,value:r,norm:a,indices:l}]})}),i}_searchLogical(t){const s=At(t,this.options),n=(a,c,h)=>{if(!a.children){const{keyId:f,searcher:g}=a,p=this._findMatches({key:this._keyStore.get(f),value:this._myIndex.getValueForItemAtKeyId(c,f),searcher:g});return p&&p.length?[{idx:h,item:c,matches:p}]:[]}const l=[];for(let f=0,g=a.children.length;f<g;f+=1){const p=a.children[f],y=n(p,c,h);if(y.length)l.push(...y);else if(a.operator===Y.AND)return[]}return l},i=this._myIndex.records,r={},o=[];return i.forEach(({$:a,i:c})=>{if($(a)){let h=n(s,a,c);h.length&&(r[c]||(r[c]={idx:c,item:a,matches:[]},o.push(r[c])),h.forEach(({matches:l})=>{r[c].matches.push(...l)}))}}),o}_searchObjectList(t){const s=it(t,this.options),{keys:n,records:i}=this._myIndex,r=[];return i.forEach(({$:o,i:a})=>{if(!$(o))return;let c=[];n.forEach((h,l)=>{c.push(...this._findMatches({key:h,value:o[l],searcher:s}))}),c.length&&r.push({idx:a,item:o,matches:c})}),r}_findMatches({key:t,value:s,searcher:n}){if(!$(s))return[];let i=[];if(C(s))s.forEach(({v:r,i:o,n:a})=>{if(!$(r))return;const{isMatch:c,score:h,indices:l}=n.searchIn(r);c&&i.push({score:h,key:t,value:r,idx:o,norm:a,indices:l})});else{const{v:r,n:o}=s,{isMatch:a,score:c,indices:h}=n.searchIn(r);a&&i.push({score:c,key:t,value:r,norm:o,indices:h})}return i}}B.version="6.6.2";B.createIndex=Et;B.parseIndex=Ve;B.config=d;B.parseQuery=At;qe(Je);const os={class:"flex my:0 w:full"},as=["disabled"],ls=["disabled"],cs={class:"flex justify-content:space-between"},hs={class:""},us={class:"font:12 lh:16px fg:gray-60 bg:gray-10 px:4 py:0.5 rounded"},Xs={__name:"TheSearchFamily",props:{catalog:{type:Object,required:!0},modelValue:{type:Object}},emits:["update:modelValue"],setup(e,{emit:t}){const s=e,n=t,i=zt(),r=O({get(){return s.modelValue},set(m){n("update:modelValue",m)}}),o=F(""),a=F(0),c=F(50),h=F(null),l=O(()=>[...new Set(s.catalog.map(({category:m})=>m.trim().replace(/[^a-zA-Z0-9\-_]+/g,"-").toLowerCase()))]),f=O(()=>{let m=s.catalog;if(o.value){let b=o.value.trim().toLowerCase();if(b.startsWith(":")){const v=b.split(" ")[0].slice(1);l.value.includes(v)&&(m=m.filter(({category:S})=>S.trim().replace(/[^a-zA-Z0-9\-_]+/g,"-").toLowerCase()===v)),b=b.slice(v.length+1).trim()}const A=new B(m,{keys:["family"],useExtendedSearch:!0,findAllMatches:!0});if(b.trim())return A.search(b).map(({item:v})=>v)}return m}),g=O(()=>f.value.slice(a.value,c.value+a.value)),p=O(()=>{const m=a.value+c.value;return!!f.value.slice(m,c.value+m).length}),y=O(()=>{const m=a.value-c.value;return!!f.value.slice(m,c.value+m).length});function x(m){o.value=m,a.value=0}return Tt(()=>{h.value.searchEl.focus()}),(m,b)=>{const A=at("VueSelect"),v=vt("ripple");return _(),Dt(A,{ref_key:"vueSelectEl",ref:h,options:g.value,modelValue:r.value,"onUpdate:modelValue":b[2]||(b[2]=S=>r.value=S),label:"family",filterable:!1,loading:U(i).isBusy,autoscroll:!0,onSearch:x,onKeyup:[b[3]||(b[3]=ft(dt(S=>a.value-=c.value*y.value,["ctrl"]),["left"])),b[4]||(b[4]=ft(dt(S=>a.value+=c.value*p.value,["ctrl"]),["right"]))],placeholder:"Choose Font Family",class:"ywf-google-search-family"},{"list-footer":tt(()=>[u("li",os,[D((_(),E("button",{type:"button",disabled:!y.value,onClick:b[0]||(b[0]=S=>a.value-=c.value),class:"button flex:1|1|0%"},b[5]||(b[5]=[H(" Prev ")]),8,as)),[[v]]),D((_(),E("button",{type:"button",disabled:!p.value,onClick:b[1]||(b[1]=S=>a.value+=c.value),class:"button flex:1|1|0%"},b[6]||(b[6]=[H(" Next ")]),8,ls)),[[v]])])]),option:tt(({family:S,category:G})=>[u("div",cs,[u("span",hs,w(S),1),u("span",us,w(G.replace(/[^a-zA-Z0-9\-_]+/g,"-").toLowerCase()),1)])]),_:1},8,["options","modelValue","loading"])}}},fs={id:"submitdiv",class:"postbox"},ds={class:"postbox-header"},gs={class:""},ps=["href"],ms={class:"inside"},bs={class:"submitbox",id:"submitpost"},ys={id:"minor-publishing"},xs={id:"misc-publishing-actions",class:"py:6"},vs={class:"misc-pub-section"},ws={class:"py:6 flex align-items:center"},Ms={class:"font:medium"},_s={class:"py:6 flex align-items:center"},Ss={class:"font:medium"},Es={class:"py:6 flex align-items:center"},$s={class:"font:medium"},ks={class:"py:6 flex align-items:center"},Is=["title"],As={class:"py:6 flex align-items:center"},Ls={key:0,class:"font:medium"},Cs={class:"py:6 flex align-items:center"},Ns={class:"font:medium"},Rs={key:0,class:"py:6 flex flex:col"},Os={class:"flex align-items:center"},Fs={class:"table-auto border-collapse mt:6 ml:36 b:1|solid|gray-20/.4"},Ts={class:"p:6"},Ds={class:"p:6 text:right"},Vs={class:"p:6 text:right"},js={class:"p:6 text:right"},Qs={__name:"TheFontInfoPanel",props:{fontData:{type:Object,required:!0},fontData:{type:Object}},setup(e){return(t,s)=>{var i,r,o,a,c,h,l,f,g,p,y,x;const n=at("font-awesome-icon");return _(),E("div",null,[u("div",fs,[u("div",ds,[u("h2",gs,[s[0]||(s[0]=H(" Font Information ")),e.fontData?(_(),E("a",{key:0,href:`https://fonts.google.com/specimen/${e.fontData.slug.replaceAll("-","+")}`,target:"_blank"},[M(n,{icon:["far","arrow-up-right-from-square"],class:"w:15 h:15"})],8,ps)):z("",!0)])]),u("div",ms,[u("div",bs,[u("div",ys,[u("div",xs,[u("div",vs,[u("div",ws,[M(n,{icon:["fas","ranking-star"],class:"h:16 w:16 flex-shrink:0 fg:#8c8f94 fill:current"}),s[1]||(s[1]=u("span",{class:"pl:10 pr:8"},"Rank:",-1)),u("span",Ms,w((i=e.fontData)==null?void 0:i.popularity),1)]),u("div",_s,[M(n,{icon:["fas","font"],class:"h:16 w:16 flex-shrink:0 fg:#8c8f94 fill:current"}),s[2]||(s[2]=u("span",{class:"pl:10 pr:8"},"Category:",-1)),u("span",Ss,w((r=e.fontData)==null?void 0:r.category),1)]),u("div",Es,[M(n,{icon:["fas","code-pull-request"],class:"h:16 w:16 flex-shrink:0 fg:#8c8f94 fill:current"}),s[3]||(s[3]=u("span",{class:"pl:10 pr:8"},"Version:",-1)),u("span",$s,w((o=e.fontData)==null?void 0:o.version),1)]),u("div",ks,[M(n,{icon:["fas","calendar-pen"],class:"h:16 w:16 flex-shrink:0 fg:#8c8f94 fill:current"}),s[4]||(s[4]=u("span",{class:"pl:10 pr:8"},"Last modified:",-1)),e.fontData?(_(),E("span",{key:0,title:(a=e.fontData)==null?void 0:a.modifiedAt,class:"font:medium"},w(U(Kt)(new Date((c=e.fontData)==null?void 0:c.modifiedAt))),9,Is)):z("",!0)]),u("div",As,[M(n,{icon:["fas","paintbrush"],class:"h:16 w:16 flex-shrink:0 fg:#8c8f94 fill:current"}),s[5]||(s[5]=u("span",{class:"pl:10 pr:8"},"Style:",-1)),e.fontData?(_(),E("span",Ls,w(t.sprintf(t._n("%d subset","%d subsets",(h=e.fontData)==null?void 0:h.subsets.length,"yabe-webfont"),(l=e.fontData)==null?void 0:l.subsets.length))+" & "+w(t.sprintf(t._n("%d variant","%d variants",(f=e.fontData)==null?void 0:f.variants.length,"yabe-webfont"),(g=e.fontData)==null?void 0:g.variants.length)),1)):z("",!0)]),u("div",Cs,[M(n,{icon:["fas","hand-holding-magic"],class:"h:16 w:16 flex-shrink:0 fg:#8c8f94 fill:current"}),s[6]||(s[6]=u("span",{class:"pl:10 pr:8"},"Designers:",-1)),u("span",Ns,w((p=e.fontData)==null?void 0:p.designers),1)]),(y=e.fontData)!=null&&y.axes.length?(_(),E("div",Rs,[u("div",Os,[M(n,{icon:["fas","gear"],class:"h:16 w:16 flex-shrink:0 fg:#8c8f94 fill:current"}),s[7]||(s[7]=u("span",{class:"pl:10 pr:8"},"Axis:",-1))]),u("table",Fs,[s[8]||(s[8]=u("tr",{class:"text:left bg:gray-5"},[u("th",{class:"p:6 b:1|solid|gray-20/.4"},[u("a",{href:"https://fonts.google.com/variablefonts#axis-definitions",target:"_blank"}," Axes ")]),u("th",{class:"p:6 b:1|solid|gray-20/.4 text:right"},"Min"),u("th",{class:"p:6 b:1|solid|gray-20/.4 text:right"},"Max"),u("th",{class:"p:6 b:1|solid|gray-20/.4 text:right"},"Default")],-1)),(_(!0),E(Vt,null,jt((x=e.fontData)==null?void 0:x.axes,m=>(_(),E("tr",{key:m.tag,class:"b:1|solid|gray-20/.4"},[u("td",Ts,w(m.tag),1),u("td",Ds,w(m.min),1),u("td",Vs,w(m.max),1),u("td",js,w(m.defaultValue),1)]))),128))])])):z("",!0)])]),s[9]||(s[9]=u("div",{class:"clear"},null,-1))])])])])])}}};export{Xs as _,Qs as a,Gs as b,Ys as u};
